/* =====================================================
   MODAL FLOW - EDUCACIONAL + CADASTRO + SUCESSO
   ===================================================== */

<div id="modal-flow" class="modal">
    <div class="modal-content modal-flow-content">
        <span class="modal-close" onclick="closeModalFlow()">&times;</span>
        
        <!-- ============================================
             PASSO 1: EDUCACIONAL (DOR + SOLU√á√ÉO)
             ============================================ -->
        <div id="step-educational" class="step-view">
            <div class="edu-header">
                <div class="edu-icon" id="edu-icon">
                    <i class="fas fa-truck"></i>
                </div>
                <h2 id="edu-title">Motorista Cegonheiro</h2>
            </div>
            
            <div class="edu-pain">
                <p class="edu-intro" id="edu-intro">Se voc√™ vive a estrada, sabe:</p>
                <ul class="pain-list" id="edu-bullets">
                    <li>J√° perdeu tempo procurando chapa confi√°vel?</li>
                    <li>Improviso na descarga gera risco de avaria?</li>
                    <li>Quer previsibilidade na rota?</li>
                </ul>
            </div>
            
            <div class="edu-solution">
                <p class="edu-turn" id="edu-turn">A log√≠stica n√£o precisa ser no grito.</p>
                <div class="edu-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Seguran√ßa</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-clock"></i>
                        <span>Previsibilidade</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-handshake"></i>
                        <span>Confian√ßa</span>
                    </div>
                </div>
            </div>
            
            <div class="edu-actions">
                <button class="btn-primary btn-large" id="btn-understand" onclick="redirectToApp()">
                    <i class="fas fa-rocket"></i> <span id="btn-text">Quero operar com seguran√ßa</span>
                </button>
                <button class="btn-secondary btn-text" onclick="closeModalFlow()">
                    Ainda tenho d√∫vidas
                </button>
            </div>
        </div>
        
        <!-- ============================================
             PASSO 2: CAMPANHA FOUNDER 500
             ============================================ -->
        <div id="step-campaign" class="step-view" style="display: none;">
            <div class="campaign-header">
                <div class="campaign-badge">
                    <i class="fas fa-crown"></i>
                    <span>CAMPANHA FOUNDER 500</span>
                </div>
                <h2>Seja um dos 500 Fundadores</h2>
                <p class="campaign-subtitle">Garanta benef√≠cios VITAL√çCIOS agora!</p>
            </div>
            
            <div class="campaign-benefits">
                <div class="benefit-card">
                    <div class="benefit-icon"><i class="fas fa-infinity"></i></div>
                    <h3>1.500 Cr√©ditos/M√™s</h3>
                    <p>Renova√ß√£o autom√°tica PARA SEMPRE</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon"><i class="fas fa-percentage"></i></div>
                    <h3>20% de Desconto</h3>
                    <p>Em TODAS as compras futuras</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon"><i class="fas fa-medal"></i></div>
                    <h3>Badge Fundador</h3>
                    <p>Selo exclusivo VITAL√çCIO</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon"><i class="fas fa-users"></i></div>
                    <h3>Sistema MGM 3 N√≠veis</h3>
                    <p>Ganhe 5% + 3% + 2% nas indica√ß√µes</p>
                </div>
            </div>
            
            <div class="campaign-counter">
                <p class="counter-label">Vagas Restantes:</p>
                <div class="counter-number">
                    <span id="vagas-restantes">437</span> / 500
                </div>
                <div class="counter-bar">
                    <div class="counter-fill" style="width: 12.6%"></div>
                </div>
            </div>
            
            <div class="campaign-actions">
                <button class="btn-primary btn-large pulse-animation" onclick="redirectToApp()">
                    <i class="fas fa-crown"></i> GARANTIR MINHA VAGA
                </button>
                <p class="campaign-note">* Apenas os primeiros 500 cadastrados</p>
            </div>
        </div>
        
        <!-- ============================================
             PASSO 3: SUCESSO + CONVITE + WHATSAPP
             ============================================ -->
        <div id="step-success" class="step-view" style="display: none;">
            <div class="success-animation">
                <div class="success-checkmark">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>üéâ PARAB√âNS, FUNDADOR!</h2>
                <p class="success-subtitle">Voc√™ √© um dos primeiros 500!</p>
            </div>
            
            <div class="success-badge-display">
                <div class="badge-earned">
                    <i class="fas fa-crown"></i>
                    <span>FUNDADOR #<span id="fundador-numero">063</span></span>
                </div>
                <p class="badge-text">Seu selo vital√≠cio foi conquistado!</p>
            </div>
            
            <div class="success-benefits-recap">
                <h3>Seus Benef√≠cios Ativados:</h3>
                <ul class="benefits-list">
                    <li><i class="fas fa-check"></i> 1.500 cr√©ditos/m√™s PARA SEMPRE</li>
                    <li><i class="fas fa-check"></i> 20% de desconto vital√≠cio</li>
                    <li><i class="fas fa-check"></i> Badge Fundador exclusivo</li>
                    <li><i class="fas fa-check"></i> Sistema MGM 3 n√≠veis ativado</li>
                </ul>
            </div>
            
            <div class="success-referral">
                <h3>üí∞ Ganhe Mais Indicando Amigos</h3>
                <p class="referral-explain">Compartilhe seu link e ganhe cr√©ditos a cada indica√ß√£o que se cadastrar!</p>
                
                <div class="referral-box">
                    <label>Seu Link de Convite:</label>
                    <div class="referral-input-group">
                        <input type="text" id="success-referral-link" readonly value="https://loomper.com.br/?ref=FUND063">
                        <button class="btn-copy" onclick="copyReferralLink()">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <p class="copy-feedback" id="copy-feedback" style="display: none;">
                        ‚úÖ Link copiado!
                    </p>
                </div>
                
                <div class="referral-actions">
                    <button class="btn-whatsapp-share" onclick="shareReferralWhatsApp()">
                        <i class="fab fa-whatsapp"></i> Compartilhar no WhatsApp
                    </button>
                </div>
                
                <div class="mgm-explainer">
                    <p><strong>Como funciona o MGM:</strong></p>
                    <ul>
                        <li><strong>N√≠vel 1:</strong> Ganhe <strong>5%</strong> + 100 cr√©ditos quando indicado comprar</li>
                        <li><strong>N√≠vel 2:</strong> Ganhe <strong>3%</strong> nas compras dos indicados do seu indicado</li>
                        <li><strong>N√≠vel 3:</strong> Ganhe <strong>2%</strong> nas compras de terceira gera√ß√£o</li>
                    </ul>
                </div>
            </div>
            
            <div class="success-whatsapp-group">
                <h3>üöÄ Entre no Grupo Exclusivo</h3>
                <p>Junte-se aos Fundadores no grupo fechado do WhatsApp</p>
                <a href="https://chat.whatsapp.com/GRUPO_FUNDADORES_500" target="_blank" class="btn-whatsapp-group">
                    <i class="fab fa-whatsapp"></i> ENTRAR NO GRUPO FUNDADORES
                </a>
                <p class="group-note">* Acesso exclusivo para os 500 primeiros cadastrados</p>
            </div>
            
            <div class="success-final-action">
                <button class="btn-primary btn-large" onclick="window.location.href='https://app.loomper.com.br'">
                    <i class="fas fa-rocket"></i> ACESSAR O APP AGORA
                </button>
            </div>
        </div>
    </div>
</div>

/* =====================================================
   ESTILOS DO MODAL FLOW
   ===================================================== */

<style>
.modal-flow-content {
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
    padding: 30px;
}

/* ========== PASSO 1: EDUCACIONAL ========== */
.edu-header {
    text-align: center;
    margin-bottom: 30px;
}

.edu-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, var(--flag-red), #ff1744);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    box-shadow: 0 4px 16px rgba(217, 4, 22, 0.3);
}

.edu-header h2 {
    font-size: 2rem;
    color: var(--ink-black);
    margin: 0;
}

.edu-pain {
    background: #f8f8ff;
    padding: 25px;
    border-radius: 12px;
    border-left: 4px solid var(--flag-red);
    margin-bottom: 25px;
}

.edu-intro {
    font-size: 1.1rem;
    color: var(--ink-black);
    margin-bottom: 15px;
    font-weight: 600;
}

.pain-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.pain-list li {
    padding: 10px 0;
    padding-left: 30px;
    position: relative;
    color: var(--ink-black-light);
    font-size: 1rem;
    line-height: 1.6;
}

.pain-list li::before {
    content: "‚ùå";
    position: absolute;
    left: 0;
    font-size: 1.2rem;
}

.edu-solution {
    background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 25px;
}

.edu-turn {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--oxford-navy);
    margin-bottom: 20px;
    text-align: center;
}

.edu-benefits {
    display: flex;
    justify-content: space-around;
    gap: 15px;
}

.benefit-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.benefit-item i {
    font-size: 2rem;
    color: var(--success);
}

.benefit-item span {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--ink-black);
}

.edu-actions {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.btn-large {
    padding: 18px 35px;
    font-size: 1.1rem;
    font-weight: 700;
}

.btn-secondary.btn-text {
    background: none;
    color: var(--ink-black-light);
    text-decoration: underline;
    border: none;
    padding: 12px;
    font-size: 0.95rem;
}

.btn-secondary.btn-text:hover {
    color: var(--oxford-navy);
}

/* ========== PASSO 2: CAMPANHA ========== */
.campaign-header {
    text-align: center;
    margin-bottom: 30px;
}

.campaign-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: var(--ink-black);
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 700;
    font-size: 0.9rem;
    margin-bottom: 15px;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
}

.campaign-header h2 {
    font-size: 2rem;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.campaign-subtitle {
    font-size: 1.1rem;
    color: var(--flag-red);
    font-weight: 600;
}

.campaign-benefits {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 30px;
}

.benefit-card {
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
}

.benefit-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    border-color: var(--flag-red);
}

.benefit-icon {
    font-size: 2.5rem;
    color: var(--flag-red);
    margin-bottom: 12px;
}

.benefit-card h3 {
    font-size: 1.1rem;
    color: var(--ink-black);
    margin-bottom: 8px;
}

.benefit-card p {
    font-size: 0.9rem;
    color: var(--ink-black-light);
    margin: 0;
}

.campaign-counter {
    background: #fff3cd;
    border: 2px solid #ffc107;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    margin-bottom: 25px;
}

.counter-label {
    font-size: 1rem;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.counter-number {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--flag-red);
    margin-bottom: 15px;
}

.counter-bar {
    width: 100%;
    height: 12px;
    background: #f0f0f0;
    border-radius: 6px;
    overflow: hidden;
}

.counter-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--flag-red), #ff4757);
    transition: width 0.5s ease;
}

.campaign-actions {
    text-align: center;
}

.pulse-animation {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.campaign-note {
    font-size: 0.85rem;
    color: var(--ink-black-lighter);
    margin-top: 12px;
}

/* ========== PASSO 3: SUCESSO ========== */
.success-animation {
    text-align: center;
    margin-bottom: 30px;
}

.success-checkmark {
    font-size: 5rem;
    color: var(--success);
    margin-bottom: 20px;
    animation: scaleIn 0.5s ease;
}

@keyframes scaleIn {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.success-animation h2 {
    font-size: 2rem;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.success-subtitle {
    font-size: 1.1rem;
    color: var(--flag-red);
    font-weight: 600;
}

.success-badge-display {
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 25px;
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
}

.badge-earned {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--ink-black);
}

.badge-earned i {
    font-size: 2rem;
}

.badge-text {
    margin-top: 10px;
    font-size: 1rem;
    color: var(--ink-black-light);
}

.success-benefits-recap {
    background: #e8f5e9;
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 25px;
}

.success-benefits-recap h3 {
    font-size: 1.2rem;
    color: var(--oxford-navy);
    margin-bottom: 15px;
}

.benefits-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.benefits-list li {
    padding: 8px 0;
    padding-left: 30px;
    position: relative;
    color: var(--ink-black);
    font-size: 1rem;
}

.benefits-list li i {
    position: absolute;
    left: 0;
    color: var(--success);
    font-size: 1.2rem;
}

.success-referral {
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 25px;
}

.success-referral h3 {
    font-size: 1.3rem;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.referral-explain {
    font-size: 0.95rem;
    color: var(--ink-black-light);
    margin-bottom: 20px;
}

.referral-input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.referral-input-group input {
    flex: 1;
    padding: 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 0.95rem;
    background: #f8f8ff;
}

.btn-copy {
    padding: 12px 20px;
    background: var(--oxford-navy);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
}

.btn-copy:hover {
    background: #152a45;
}

.copy-feedback {
    color: var(--success);
    font-size: 0.9rem;
    font-weight: 600;
}

.btn-whatsapp-share {
    width: 100%;
    padding: 15px;
    background: #25D366;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: background 0.3s;
}

.btn-whatsapp-share:hover {
    background: #1ea952;
}

.mgm-explainer {
    background: #f8f8ff;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
}

.mgm-explainer p {
    font-weight: 700;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.mgm-explainer ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.mgm-explainer li {
    padding: 8px 0;
    color: var(--ink-black-light);
    font-size: 0.95rem;
}

.mgm-explainer strong {
    color: var(--flag-red);
}

.success-whatsapp-group {
    background: linear-gradient(135deg, #d4edda, #c3e6cb);
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    margin-bottom: 25px;
}

.success-whatsapp-group h3 {
    font-size: 1.3rem;
    color: var(--ink-black);
    margin-bottom: 10px;
}

.success-whatsapp-group p {
    font-size: 1rem;
    color: var(--ink-black-light);
    margin-bottom: 20px;
}

.btn-whatsapp-group {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 15px 30px;
    background: #25D366;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 700;
    transition: background 0.3s;
}

.btn-whatsapp-group:hover {
    background: #1ea952;
}

.group-note {
    font-size: 0.85rem;
    color: var(--ink-black-lighter);
    margin-top: 12px;
}

.success-final-action {
    text-align: center;
}

/* ========== RESPONSIVO ========== */
@media (max-width: 600px) {
    .campaign-benefits {
        grid-template-columns: 1fr;
    }
    
    .edu-benefits {
        flex-direction: column;
    }
}
</style>

/* =====================================================
   JAVASCRIPT DO MODAL FLOW
   ===================================================== */

<script>
// Dados dos perfis (educacional)
const profileData = {
    motorista: {
        icon: 'fa-truck',
        title: 'Motorista Cegonheiro',
        intro: 'Se voc√™ vive a estrada, sabe:',
        bullets: [
            'J√° perdeu tempo procurando chapa confi√°vel?',
            'Improviso na descarga gera risco de avaria?',
            'Quer previsibilidade na rota?'
        ],
        turn: 'A log√≠stica n√£o precisa ser no grito.',
        btnText: 'Quero operar com seguran√ßa'
    },
    ajudante: {
        icon: 'fa-hands-helping',
        title: 'Ajudante / Chapa',
        intro: 'Na descarga, a realidade √© dura:',
        bullets: [
            'O trabalho aparece s√≥ de vez em quando?',
            'Falta reconhecimento profissional?',
            'Quer sair da informalidade total?'
        ],
        turn: 'Quem trabalha bem merece const√¢ncia.',
        btnText: 'Quero mais oportunidades'
    },
    transportadora: {
        icon: 'fa-building',
        title: 'Transportadora',
        intro: 'Pequenos ru√≠dos viram grandes preju√≠zos:',
        bullets: [
            'Atrasos na ponta final?',
            'Risco jur√≠dico e operacional?',
            'Falta de padroniza√ß√£o nos processos?'
        ],
        turn: 'Organiza√ß√£o √© lucro e prote√ß√£o.',
        btnText: 'Quero controle total'
    }
};

// Vari√°vel global para armazenar perfil escolhido
let selectedProfile = null;

// Abrir modal educacional
function openEducationalModal(profile) {
    selectedProfile = profile;
    const data = profileData[profile];
    
    // Preencher conte√∫do
    document.getElementById('edu-icon').innerHTML = `<i class="fas ${data.icon}"></i>`;
    document.getElementById('edu-title').textContent = data.title;
    document.getElementById('edu-intro').textContent = data.intro;
    document.getElementById('edu-bullets').innerHTML = data.bullets.map(b => `<li>${b}</li>`).join('');
    document.getElementById('edu-turn').textContent = data.turn;
    document.getElementById('btn-text').textContent = data.btnText;
    
    // Mostrar modal
    document.getElementById('modal-flow').style.display = 'block';
    document.getElementById('step-educational').style.display = 'block';
    document.getElementById('step-campaign').style.display = 'none';
    document.getElementById('step-success').style.display = 'none';
    document.body.style.overflow = 'hidden';
}

// Fechar modal
function closeModalFlow() {
    document.getElementById('modal-flow').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Redirecionar para app com perfil
function redirectToApp() {
    // Salvar perfil no localStorage
    if (selectedProfile) {
        localStorage.setItem('loomper_perfil_escolhido', selectedProfile);
    }
    
    // Redirecionar com query param
    const profileParam = selectedProfile ? `?perfil=${selectedProfile}` : '';
    window.location.href = `https://app.loomper.com.br${profileParam}`;
}

// Copiar link de convite
function copyReferralLink() {
    const input = document.getElementById('success-referral-link');
    input.select();
    input.setSelectionRange(0, 99999); // Mobile
    
    navigator.clipboard.writeText(input.value).then(() => {
        const feedback = document.getElementById('copy-feedback');
        feedback.style.display = 'block';
        setTimeout(() => {
            feedback.style.display = 'none';
        }, 3000);
    });
}

// Compartilhar no WhatsApp
function shareReferralWhatsApp() {
    const link = document.getElementById('success-referral-link').value;
    const message = `üöÄ Fala parceiro!

Acabei de garantir minha vaga como FUNDADOR no Loomper - o primeiro ecossistema pra log√≠stica de cegonhas!

Sou um dos primeiros 500 e garanti benef√≠cios VITAL√çCIOS:
‚úÖ 1.500 cr√©ditos/m√™s PARA SEMPRE
‚úÖ 20% de desconto em tudo
‚úÖ Badge exclusivo de Fundador
‚úÖ Sistema de indica√ß√µes 3 n√≠veis

Se faz sentido pra voc√™, entra aqui e garante sua vaga:
${link}

Restam poucas vagas! üî•`;

    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
}

// Fechar modal ao clicar fora
window.onclick = function(event) {
    const modal = document.getElementById('modal-flow');
    if (event.target === modal) {
        closeModalFlow();
    }
}
</script>
